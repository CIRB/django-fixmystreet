{% extends "pro/reports/search.html" %}
{% load i18n tags %}

{% block results %}
<form id="incident-filter" method="GET">
    <span class="span4">{{ search_form.status }}</span>
    <span class="span4">{{ search_form.ownership }}</span>
    <span class="span4"><a class="btn" href="{% url 'report_table_pro' %}">{% trans "Display as table" %}</a></span>
</form>

<div>
    <div id='search_results' class="span8">
        <a id="create_report_fastlink" href="{% url 'report_prepare_pro' %}" class="report">
           <h3 class="report-title">{% trans "create_report" %}</h3>
        </a>
        {% for report in reports %}
        {% include "reports/_navigation.html" with url=report.get_absolute_url_pro %}
        {% endfor %}
        {% include "_paginator.html" with page=reports %}
    </div>
    <div class="span4">
        <div id="search_by_commune_or_address" class="block highlighted">
            <form id="search-street">
                <h2>{% trans "Search address:" %}</h2>
                <input type="search" class="input-block-level" name="q" {% if location %}value="{{location}}"{% endif %} placeholder="{% trans 'Street name, Street number...' %}" id="input-commune-search" style="box-sizing:border-box;">
                <div class="form-search">
                    <select id="input-ward" class="input-medium" onchange="javascript:filterReports()">
                        <option value="">{% trans "All communes..." %}</option>
                        {% for zip in zipcodes %}
                            <option value={{zip.code}}>{{zip.code}} {{zip.name}}</option>
                        {% endfor %}
                    </select>

                    <input type="submit" class="btn" id="filterReports" value="{% trans 'Search street' %}"/>
                </div>
                <div id="search_by_commune_or_address_section_results" style="display:none">
                    <ul id="proposal" class="inline"> </ul>
                </div>
            </form>
            <form id="search-by-address" style="display:none">
                <p>{% trans "within a radius of:" %}</p>
                <select id="rayon" class="input-block-level">
                    <option value="">{% trans 'No limit'%}</option>
                    <option value="50">50m</option>
                    <option value="100">100m</option>
                    <option value="200">200m</option>
                </select>
                <input class="btn" type="submit" id="applyFilter" value="{% trans 'Filtrer list of reports' %}">
            </form>
        </div>
        <form action="{% url 'search_ticket_pro' %}" class="block highlighted" id="search_by_ticket_nr">
            <!-- TODO create logic behind searching -->
            <h2>{% trans "Search by ticket number:" %}</h2>
            <div class="form-search">
                <input id="input-search" type="search" name="report_id" placeholder="{% trans 'Ticket number' %}">
                <input type="submit" class="btn" id="filterReports" value="{% trans 'Search' %}"/>
            </div>
        </form>
    </div>

</div>
{% endblock %}
