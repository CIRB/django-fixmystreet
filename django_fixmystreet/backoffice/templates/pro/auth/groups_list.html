{% extends "pro/auth/base.html" %}
{% load i18n tags %}
{% load static from staticfiles %}

{% block title %}{% trans "Groups admin" %}{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'lib/dataTables/css/jquery.dataTables.css' %}"></link>
{{ block.super }}
{% endblock %}

{% block script %}
{{ block.super }}
<script src="{% static 'lib/dataTables/js/jquery.dataTables.js' %}"></script>
<script src="{% static 'lib/dataTables-columnFilter/js/jquery.dataTables.columnFilter.js' %}"></script>
<script>

$(document).ready(function() {
    var table = $('#groups-table').dataTable();

    table.columnFilter({ sPlaceHolder: "head:after",
        aoColumns: [
             {type: "text"}, // name
             {type: "text"}, // phone
             {type: "text"} // email
        ]
    });
});

</script>
{% endblock %}

{% block content %}
{{ block.super }}
<div class="span12">
    <table id="groups-table">
        <thead>
            <tr>
                <td>{% trans "Name" %}</td>
                <td>{% trans "Email" %}</td>
                <td>{% trans "Type" %}</td>
            </tr>
            <tr>
                <td>{% trans "Name" %}</td>
                <td>{% trans "Email" %}</td>
                <td>{% trans "Type" %}</td>
            </tr>
        </thead>
        <tbody>
            {% for group in groups %}
            <tr>
                <td>
                    <a href="{% url 'edit_group' group_id=group.id %}">{{ group }}</a>
                </td>
                <td>
                    <a href="mailto:{{ group.email }}">{{ group.email }}</a>
                </td>
                <td>
                    <a>{{ group.get_type_display }}</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% if can_create %}
    <p class="lead span12">
        <a class="btn btn-large btn-primary" href="{% url 'create_group' %}"><i class="icon-plus"></i> {% trans 'Create group' %}</a>
    </p>
{% endif %}

{% endblock %}
