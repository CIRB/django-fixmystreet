{% load i18n %}
<div class="report_update">
    {% if editable %}
        <a class="pull-right" onclick="return confirm('{% trans 'Please confirm deletion' %}')" href="{% url 'report_delete_attachment' report.id %}?attachmentId={{attachment.id}}">
            <img src="{{STATIC_URL}}images/delete-icon.png" width='24px' alt="{% trans 'delete file' %}" title="{% trans 'delete file'%}"/>
        </a>
    {% endif %}
    <div class="update_text">
    {% if attachment.reportfile %}
        <span class="picture-caption">
            <a href="{{ attachment.reportfile.file.url }}">
                {% if attachment.reportfile.is_image %}
                    <img src='{{attachment.reportfile.image.url}}' class="view-image"/>
                {% elif attachment.reportfile.is_pdf %}
                    <img src='/static/images/icon-pdf.png'/>
                {% elif attachment.reportfile.is_word %}
                    <img src='/static/images/icon-word.png'/>
                {% elif attachment.reportfile.is_excel %}
                    <img src='/static/images/icon-excel.png'/>
                {% endif %}
                {{attachment.reportfile.title}}
            </a>
        </span>
        <p class="picture-date">
            {% trans 'file creation Date' %}
            {% if attachment.reportfile.file_creation_date != None%}
                {{attachment.reportfile.file_creation_date}}
            {% else %} - {% endif %}
        </p>
    {% else %} {# comment #}
        <p class="comment-incident">{{ attachment.reportcomment.text }}</p>
    {% endif %}

    {% if privacy == 'private' %}
    <p class="author-sign comment-date">
        {% blocktrans with by=attachment.get_display_name on=attachment.created %}
        Posted by <strong>{{by}}</strong> on <strong>{{on}}</strong>
        {% endblocktrans %}
    </p>
    {% else %}
    <p class="author-sign comment-date">
        {% blocktrans with on=report.created %}
        Posted on <strong>{{on}}</strong>
        {% endblocktrans %}
    </p>
    {% endif %}

    <!-- If the status allow such interactions -->
    {% if editable %}
        <ul>
            <li><label>
                <input type="radio" name="security_level_{{attachment.id}}" data-attachment-id="{{attachment.id}}" value="{{attachment.PUBLIC}}"{% if attachment.is_public %} checked="checked"{% endif %}>
                {% trans "Public" %}
            </label></li>

            <li><label>
                <input type="radio" name="security_level_{{attachment.id}}" data-attachment-id="{{attachment.id}}" value="{{attachment.PRIVATE}}"{% if attachment.is_private %} checked="checked"{% endif %}>
                {% trans "Private" %}
            </label></li>
            <li><label>
                <input type="radio" name="security_level_{{attachment.id}}" data-attachment-id="{{attachment.id}}" value="{{attachment.CONFIDENTIAL}}"{% if attachment.is_confidential %} checked="checked"{% endif %}>
                {% trans "Confidential" %}
            </label></li>
        </ul>
    {% else %}
        <p>
        {% if attachment.security_level == attachment.PRIVATE %}
            {% trans "private" %}
        {% elif attachment.security_level == attachment.CONFIDENTIAL %}
            {% trans "confidential" %}
        {% endif %}
        </p>
    {% endif %}
    </div> <!-- update_text -->
</div> <!-- report_update -->
