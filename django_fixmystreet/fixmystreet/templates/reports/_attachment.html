{% load i18n %}
{% if attachment.reportfile %}

<li class="report_update left">
{% else %}
<li class="report_update right">
    {% endif %}
    {% if editable %}
        <a class="pull-right" onclick="return confirm('{% trans 'Please confirm deletion' %}')" href="{% url 'report_delete_attachment' report.id %}?attachmentId={{attachment.id}}">
            <img src="{{STATIC_URL}}images/delete-icon.png" width='24px' alt="{% trans 'delete file' %}" title="{% trans 'delete file'%}"/>
        </a>
    {% endif %}
    <div class="update_text">
    {% if attachment.reportfile %}
        <div class="picture-head">
            {% trans "Posted by" %} <strong>{{ attachment.reportfile.get_display_name_as_citizen }}</strong>
            <!-- If the status allow such interactions -->
    {% if editable %}
        <div class="btn-group changeStatus">
          {% if attachment.is_public %}
              <a class="btn dropdown-toggle public" data-toggle="dropdown" href="#">
                {% trans 'Public' %}
                <span class="caret"></span>
              </a>
          {% elif attachment.is_private %}
              <a class="btn dropdown-toggle private" data-toggle="dropdown" href="#">
                {% trans 'Private' %}
                <span class="caret"></span>
              </a>
          {% elif attachment.is_confidential %}
              <a class="btn dropdown-toggle confidential" data-toggle="dropdown" href="#">
                {% trans 'Confidential' %}
                <span class="caret"></span>
              </a>
          {% endif %}
          <ul class="dropdown-menu">
            {% if attachment.is_confidential or attachment.is_private %}
                <li><label class="makePublic">
                    <!--input type="radio" name="security_level_{{attachment.id}}" data-attachment-id="{{attachment.id}}" value="{{attachment.PUBLIC}}"{% if attachment.is_public %} checked="checked"{% endif %}-->
                    <input type="radio" name="security_level_{{attachment.id}}" data-attachment-id="{{attachment.id}}" value="{{attachment.PUBLIC}}">
                    {% trans "Public" %}
                </label></li>
            {% endif %}
            {% if attachment.is_confidential or attachment.is_public %}
                <li><label class="makePrivate">
                    <!--input type="radio" name="security_level_{{attachment.id}}" data-attachment-id="{{attachment.id}}" value="{{attachment.PRIVATE}}"{% if attachment.is_private %} checked="checked"{% endif %}-->
                    <input type="radio" name="security_level_{{attachment.id}}" data-attachment-id="{{attachment.id}}" value="{{attachment.PRIVATE}}">
                    {% trans "Private" %}
                </label></li>
            {% endif %}
            {% if attachment.is_public or attachment.is_private %}
                <li><label class="makeConfidential">
                    <!--input type="radio" name="security_level_{{attachment.id}}" data-attachment-id="{{attachment.id}}" value="{{attachment.CONFIDENTIAL}}"{% if attachment.is_confidential %} checked="checked"{% endif %}-->
                    <input type="radio" name="security_level_{{attachment.id}}" data-attachment-id="{{attachment.id}}" value="{{attachment.CONFIDENTIAL}}">
                    {% trans "Confidential" %}
                </label></li>
            {% endif %}
          </ul>
        </div>
    {% else %}
        <!--p>
        {% if attachment.security_level == attachment.PRIVATE %}
            {% trans "private" %}
        {% elif attachment.security_level == attachment.CONFIDENTIAL %}
            {% trans "confidential" %}
        {% endif %}
        </p-->
    {% endif %}
        </div>
        <span class="picture-caption">
            <!--a href="{{ attachment.reportfile.file.url }}"-->
            <a href="#modal-img" data-toggle="modal" class="lk_picture">
                {% if attachment.reportfile.is_image %}
                    <img id='imgtoshow' src='{{attachment.reportfile.file.url}}' class="view-image"/>
                {% elif attachment.reportfile.is_pdf %}
                    <img src='/static/images/icon-pdf.png'/>
                {% elif attachment.reportfile.is_word %}
                    <img src='/static/images/icon-word.png'/>
                {% elif attachment.reportfile.is_excel %}
                    <img src='/static/images/icon-excel.png'/>
                {% endif %}
            </a>
            <!-- Modal -->
            <div id="modal-img" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="modal-img-label" aria-hidden="true">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                    <img src="{{ attachment.reportfile.image.url }}" />
                </div>
            </div>
            <p class="comment-incident">
                <img src="{{STATIC_URL}}images/comment-bg.png" class="comment-deco" />
                {{attachment.reportfile.title}}
            </p>
            <p class="picture-date">
            {% trans 'file creation Date' %}

            <span id='imagedate'>
                {% if attachment.reportfile.file_creation_date != None%}
                {{attachment.reportfile.file_creation_date}}
                {% else %} - {% endif %}
            </span>

            </p>
        </span>

    {% else %} {# comment #}
        <div class="comment-head">
            {% trans "Posted by" %} <strong>{{ attachment.reportcomment.get_display_name_as_citizen }}</strong>
        </div>
        <p class="comment-incident">
            <img src="{{STATIC_URL}}images/comment-bg.png" class="comment-deco" />
            {{ attachment.reportcomment.text|linebreaksbr }}</p>
    {% endif %}

    {% if privacy == 'private' %}
    <p class="author-sign comment-date">
        {% trans "Posted by" %}
            <strong>
                <a href="mailto:{{attachment.created_by.email}}">
                    {% if attachment.created_by.is_citizen %}
                        {{attachment.created_by.get_quality}}
                    {% else %}
                        {{attachment.created_by.get_organisation}}
                    {% endif %}
                    {{attachment.reportcomment.get_display_name}},
                    {{attachment.created_by.telephone}}
                </a>
            </strong>
        {% trans "on" %} <strong>{{attachment.created}}</strong>
    </p>
    {% else %}
    <!--p class="author-sign comment-date">
        {% blocktrans with by=attachment.reportcomment.get_display_name_as_citizen on=report.created %}
        Posted by <strong>{{by}}</strong> on <strong>{{on}}</strong>
        {% endblocktrans %}
    </p-->
    {% endif %}

    
    </div> <!-- update_text -->
</li> <!-- report_update -->
