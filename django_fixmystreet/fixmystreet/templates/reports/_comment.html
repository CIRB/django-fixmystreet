{% load i18n %}

<div class="report_update">
    {% if request.user.id == report.responsible_manager.id %}
        {% if report.is_created or report.is_in_progress  %}
            <!-- Manager in charge only -->
            <a class="pull-right" onclick="return confirm('{% trans 'Please confirm comment deletion' %}')" href="{% url report_delete_comment report.id %}?commentId={{comment.id}}">
                <img src="{{STATIC_URL}}images/delete-icon.png" width='24px' alt="{% trans 'delete comment' %}" title="{% trans 'delete comment'%}"/>
            </a>
        {% endif %}
    {% endif %}
    <div class="update_text">
        <p class="comment-incident">{{ comment.text }}</p>
        {% if BACKOFFICE %}
        {% blocktrans with by=comment.get_display_name on=comment.created %}
        Posted by <strong>{{by}}</strong> on <strong>{{on}}</strong>
        {% endblocktrans %}
        {% else %}
        <p class="author-sign comment-date">
                    {% blocktrans with on=report.created %}
                        Posted on <strong>{{on}}</strong>
                    {% endblocktrans %}

        </p>
        {% endif %}
    </div> <!-- update_text -->
    <!-- If the status allow such interactions -->
    {% if report.is_in_progress and report.responsible_manager.id == request.user.id %}
        <ul>
            <li><label>
                <input type="radio" name="comment_security_level_{{comment.id}}" data-type="comment" data-attachment-id="{{comment.id}}" value="{{comment.PUBLIC}}"{% if comment.is_public %} checked="checked"{% endif %}>
                {% trans "Public" %}
            </label></li>

            <li><label>
                <input type="radio" name="comment_security_level_{{comment.id}}" data-type="comment" data-attachment-id="{{comment.id}}" value="{{comment.PRIVATE}}"{% if comment.is_private %} checked="checked"{% endif %}>
                {% trans "Private" %}
            </label></li>
            <li><label>
                <input type="radio" name="comment_security_level_{{comment.id}}" data-type="comment" data-attachment-id="{{comment.id}}" value="{{comment.CONFIDENTIAL}}"{% if comment.is_confidential %} checked="checked"{% endif %}>
                {% trans "Confidential" %}
            </label></li>
        </ul>
    {% else %}
        {% if comment.security_level == comment.PRIVATE %}
            {% trans "private" %}
        {% elif comment.security_level == comment.CONFIDENTIAL %}
            {% trans "confidential" %}
        {% endif %}
    {% endif %}
</div> <!-- report_update -->
<div style="clear:both"></div>
