{% load i18n tags %}
<form enctype="multipart/form-data" method="post" action="" id="report-form" class="form-horizontal">

    <!-- Description -->
    <div id="description" class="" style="margin-top: 30px;">
        {% block report_form %}

            {% if report_form %}
                {% for field in report_form.hidden_fields %}
                    {{ field }}
                {% endfor %}

                <div class="control-group">

                    <label class="control-label" for="category_select">
                        <strong>{% trans 'Constatation' %}</strong>
                    </label>
                    <div class="controls">
                        {% input_class report_form.category 'span4' %}
                        {% input_class report_form.secondary_category 'span6' %}
                    </div>
                </div>
            {% endif %}

            {% include "reports/_photo_form.html" %}

            <div class="control-group">
                <label for="add_comment" class="control-label">
                    <strong>{% trans 'Commentaire' %}</strong><br />
                    {% trans 'Votre commentaire sera validé avant publication sur le site.' %}
                </label>
                <div class="controls">
                    {% input_class comment_form.text 'fullsize_field' %}
                </div>
            </div>

        {% endblock %}

        {% if not BACKOFFICE %}
            <p>
                <button id="nextStep" class="btn pull-right" disabled>Etape suivante</button>
            </p>
        {% else %}
            <div class="control-group">
                <label for="notifications" class="control-label">
                    <strong>{% trans 'Notifications' %}</strong>
                </label>

                {% if report_form %}
                    <div class="controls">
                        <label class="checkbox inline">
                            {% input_class report_form.subscription 'conditions_check' %}
                            {% trans "J'accepte de recevoir des notifications par emails m'informant de l'évolution de l'incident" %}
                        </label>
                    </div>
                {% endif %}
            </div>

            <div class="warning_information_form">
                <button id="validate_button" class="btn pull-right" disabled> {% trans 'Send' %}</button>
            </div>
        {% endif %}
    </div>


    <!-- Coordonnées. Only for citizen -->
    {% if not BACKOFFICE %}
        <div id="coordonnees" class="" style="margin-top: 30px;" hidden>

            {% if citizen_form %}

                <div class="control-group">
                    <label for="name" class="control-label">
                        <strong>{% trans 'Nom' %}</strong>
                    </label>
                    <div class="controls">
                        {% input_class citizen_form.last_name 'span10' %}
                    </div>
                </div>

                <div class="control-group">
                    <label for="quality" class="control-label">
                        <strong>{% trans 'Qualité' %}</strong>
                    </label>
                    <div class="controls">
                        {% input_class citizen_form.quality 'span10' %}
                    </div>
                </div>

                <div class="control-group">
                    <label for="telephone" class="control-label">
                        <strong>{% trans 'Téléphone' %}</strong>
                    </label>
                    <div class="controls">
                        {% input_class citizen_form.telephone 'span10' %}
                    </div>
                </div>
                <div class="control-group">
                    <label for="email" class="control-label">
                        <strong>{% trans 'Email' %}</strong>
                    </label>
                    <div class="controls">
                        {% input_class citizen_form.email 'span10' %}
                    </div>
                </div>

            {% endif %}

            {% if report_form %}
                <div class="control-group">
                    <label for="notifications" class="control-label">
                        <strong>{% trans 'Notifications' %}</strong>
                    </label>


                        <div class="controls">
                            <label class="checkbox inline">
                                {% input_class report_form.subscription 'conditions_check' %}
                                {% trans "J'accepte de recevoir des notifications par emails m'informant de l'évolution de l'incident" %}
                            </label>
                        </div>
                </div>
            {% endif %}

            {% if not BACKOFFICE and report_form%}

                <div class="control-group">
                    <label for="conditions" class="control-label">
                        <strong>{% trans 'Conditions' %}</strong>
                    </label>

                    <div class="controls">
                        <label class="checkbox inline">
                            {% input_class report_form.terms_of_use_validated 'conditions_check' %}
                            {% trans "J'ai lu et accepté les conditions d'utilisations (+ lien)" %}
                        </label>
                    </div>
                </div>

            {% endif %}

            <div id="required-note" >{% trans "* This fields are required" %}</div>

            <div class="warning_information_form">

                {% if report_form %}
                    <p class="info_end_form" style="clear:both">{% trans "Un email contenant le rapport vous sera envoyé juste après l'envoi." %}</p>
                {% endif %}

                <button id="validate_button" class="btn pull-right" disabled> {% trans 'Send' %}</button>
            </div>
            <p class="prevStep"><button id="previousStep">Etape précédente</button></p>

        </div>
    {% endif %}

</form>
