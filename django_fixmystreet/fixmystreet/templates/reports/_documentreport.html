{% load i18n tags %}
<form enctype="multipart/form-data" method="post" action="" id="report-form" class="form-horizontal">

    <!-- Description -->
    <div id="description" class="" style="margin-top: 30px;">
        {% block report_form %}

            {% if report_form %}
                {% for field in report_form.hidden_fields %}
                    {{ field }}
                {% endfor %}

                <div class="control-group required">

                    <label class="control-label" for="category_select">
                        <strong>{% trans 'Observation' %}</strong>
                    </label>
                    <div class="controls container-fluid">
                        <div class="row-fluid">
                            <span class="span5">
                                {{ report_form.category }}
                            </span>
                            <span class="span7">
                                {{ report_form.secondary_category }}
                            </span>
                        </div>
                    </div>
                </div>
            {% endif %}

            {% include "reports/_photo_form.html" %}

            <div class="control-group">
                <label for="add_comment" class="control-label">
                    <strong>{% trans 'Comment' %}</strong><br />
                    {% trans 'Votre commentaire sera validé avant publication sur le site.' %}
                </label>
                <div class="controls container-fluid">
                    <div class="row-fluid row-prevent-clear">
                    {% input_class comment_form.text 'span12' %}
                    </div>
                </div>
            </div>

        {% endblock %}

        {% if not BACKOFFICE %}
            <p>
                {% if not report_form %}
                    <p class="prevStep"><a href="{% url 'report_show' report_id=report.id slug=report.get_slug %}">{% trans "Cancel" %}</a></p>
                {% endif %}

                <button id="nextStep" class="btn pull-right" disabled>{% trans 'Next step' %}</button>
            </p>
        {% else %}
            <div class="control-group">
                {% if report_form %}
                    <label for="notifications" class="control-label">
                        <strong>{% trans 'Notifications' %}</strong>
                    </label>

                    <div class="controls">
                        <label class="checkbox inline">
                            {% input_class report_form.subscription 'conditions_check' %}
                            {% trans "I want to be notified of the evolution of the incident" %}
                        </label>
                    </div>
                {% endif %}
            </div>

            <div class="warning_information_form">
                {% if not report_form %}
                    <p class="prevStep"><a href="{% url 'report_show_pro' report_id=report.id slug=report.get_slug %}">{% trans "Cancel" %}</a></p>
                {% endif %}
                <button id="validate_button" class="btn pull-right" disabled> {% trans 'Send' %}</button>
            </div>
        {% endif %}
    </div>


    <!-- Coordonnées. Only for citizen -->
    {% if not BACKOFFICE %}
        <div id="coordonnees" class="" style="margin-top: 30px;" hidden>

            {% if citizen_form %}

                <div class="control-group required">
                    <label for="name" class="control-label">
                        <strong>{% trans 'Name' %}</strong>
                    </label>
                    <div class="controls">
                        {% input_class citizen_form.last_name 'span10' %}
                    </div>
                </div>

                <div class="control-group required">
                    <label for="quality" class="control-label">
                        <strong>{% trans 'Quality' %}</strong>
                    </label>
                    <div class="controls">
                        {% input_class citizen_form.quality '' %}
                    </div>
                </div>

                <div class="control-group required">
                    <label for="telephone" class="control-label">
                        <strong>{% trans 'Phone' %}</strong>
                    </label>
                    <div class="controls">
                        {% input_class citizen_form.telephone 'span10' %}
                    </div>
                </div>
                <div class="control-group required">
                    <label for="email" class="control-label">
                        <strong>{% trans 'Email' %}</strong>
                    </label>
                    <div class="controls">
                        {% input_class citizen_form.email 'span10' %}
                    </div>
                </div>

            {% endif %}

            {% if report_form %}
                <div class="control-group">
                    <label for="notifications" class="control-label">
                        <strong>{% trans 'Notifications' %}</strong>
                    </label>


                        <div class="controls">
                            <label class="checkbox inline">
                                {% input_class report_form.subscription 'conditions_check' %}
                                {% trans "I want to be notified of the evolution of the incident" %}
                            </label>
                        </div>
                </div>
            {% endif %}

            {% if not BACKOFFICE and report_form%}

                <div class="control-group">
                    <label for="conditions" class="control-label">
                        <strong>{% trans 'Terms of use' %}</strong>
                    </label>

                    <div class="controls">
                        <label class="checkbox inline">
                            {% input_class report_form.terms_of_use_validated 'conditions_check' %}
                            {% trans "I have read and agree to the <a href='/terms-of-use'>terms of use</a>" %}
                        </label>
                    </div>
                </div>

            {% endif %}

            <div id="required-note" >{% trans "* This fields are required" %}</div>

            <div class="warning_information_form">

                {% if report_form %}
                    <p class="info_end_form" style="clear:both">{% trans "The report will be send to you by mail." %}</p>
                {% endif %}

                <button id="validate_button" class="btn pull-right" disabled> {% trans 'Send' %}</button>
            </div>
            <p class="prevStep"><button id="previousStep">{% trans 'Previous step' %}</button></p>

        </div>
    {% endif %}

</form>
